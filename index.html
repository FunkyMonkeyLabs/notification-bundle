<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Notification-bundle by FunkyMonkeyLabs</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Notification-bundle</h1>
        <p>Bundle for notification lib</p>

        <p class="view"><a href="https://github.com/FunkyMonkeyLabs/notification-bundle">View the Project on GitHub <small>FunkyMonkeyLabs/notification-bundle</small></a></p>


        <ul>
          <li><a href="https://github.com/FunkyMonkeyLabs/notification-bundle/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/FunkyMonkeyLabs/notification-bundle/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/FunkyMonkeyLabs/notification-bundle">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a name="whats-that" class="anchor" href="#whats-that"><span class="octicon octicon-link"></span></a>What's that?</h3>

<p>FML/Notification lib allows to send notification through different channels during application runtime.
Library can collect many messages to many users and send it to them once, when application is going down.</p>

<p>FML/NotificationBundle is wrapping Notification Library so you can send notification easily in your projects when you are using Symfony2 Framework.</p>

<p>During runtime, you can register messages. That's it. When there appears <em>terminate</em> event, NotificationBundle will send all of the messages.</p>

<h3>
<a name="instalation" class="anchor" href="#instalation"><span class="octicon octicon-link"></span></a>Instalation</h3>

<h4>
<a name="composer" class="anchor" href="#composer"><span class="octicon octicon-link"></span></a>composer</h4>

<pre><code>$ php composer.phar require fml/notification-bundle:1.3.*
</code></pre>

<div class="highlight highlight-php"><pre><span class="c1"># app/AppKernel.php</span>

<span class="k">class</span> <span class="nc">AppKernel</span> <span class="k">extends</span> <span class="nx">Kernel</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">registerBundles</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$bundles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
            <span class="o">...</span>
            <span class="k">new</span> <span class="nx">FML\Notification\NotificationBundle\FMLNotificationBundle</span><span class="p">()</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>By default there is a one channel - mail channel. It requires mailer service. If you want to send notification to user Patryk with e-mail address <a href="mailto:contact@funkymonkeylabs.pl">contact@funkymonkeylabs.pl</a>, with message "Hello Patryk", you have to write:</p>

<div class="highlight highlight-php"><pre><span class="k">class</span> <span class="nc">SomeController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$recipient</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FML\Notification\NotificationBundle\Notification\Recipient\Recipient</span><span class="p">();</span>
        <span class="nv">$recipient</span>
            <span class="o">-&gt;</span><span class="na">setAddress</span><span class="p">(</span><span class="s1">'contact@funkymonkeylabs.pl'</span><span class="p">)</span>
            <span class="o">-&gt;</span><span class="na">setName</span><span class="p">(</span><span class="s1">'Patryk'</span><span class="p">);</span>

        <span class="nv">$message</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FML\Notification\NotificationBundle\Message\PlainMailMessage</span><span class="p">();</span>

        <span class="nv">$sender</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'fml.notification.sender'</span><span class="p">);</span> <span class="c1">// get sender instance</span>
        <span class="nv">$sender</span><span class="o">-&gt;</span><span class="na">addMessage</span><span class="p">(</span><span class="s1">'fml.meetings.notification.message.meeting'</span><span class="p">,</span> <span class="nv">$recipient</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="nv">$recipient</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">()</span>
        <span class="p">));</span> <span class="c1">// add message to queue</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="adding-channels" class="anchor" href="#adding-channels"><span class="octicon octicon-link"></span></a>Adding channels</h3>

<p>You can also add your own channel (for example if you are going to send SMS messages).</p>

<div class="highlight highlight-php"><pre><span class="c1">// src/Acme/DemoBundle/AcmeDemoBundle.php</span>
<span class="k">namespace</span> <span class="nx">Acme\DemoBundle</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\HttpKernel\Bundle\Bundle</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\DependencyInjection\ContainerBuilder</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Acme\DemoBundle\Channel\SMSChannel</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AcmeDemoBundle</span> <span class="k">extends</span> <span class="nx">Bundle</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">build</span><span class="p">(</span><span class="nx">ContainerBuilder</span> <span class="nv">$container</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">build</span><span class="p">(</span><span class="nv">$container</span><span class="p">);</span>

        <span class="nv">$channel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SMSChannel</span><span class="p">();</span>

        <span class="nv">$sender</span> <span class="o">=</span> <span class="nv">$container</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'fml.meetings.sender'</span><span class="p">);</span>
        <span class="nv">$sender</span><span class="o">-&gt;</span><span class="na">addChannel</span><span class="p">(</span><span class="nv">$channel</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p><a href="https://github.com/abdulklarapl" class="user-mention">@abdulklarapl</a> Patryk Szlagowski</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with library? Check <a href="https://github.com/FunkyMonkeyLabs/notification-bundle">https://github.com/FunkyMonkeyLabs/notification-bundle</a> and give us some info! You can create issue as well.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/FunkyMonkeyLabs">FunkyMonkeyLabs</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>